"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var http_1 = require("@angular/common/http");
var Constants = require("../../constants");
var UserService = /** @class */ (function () {
    function UserService(httpClient) {
        this.httpClient = httpClient;
    }
    UserService.prototype.login = function (user) {
        var url = Constants.SERVER_URL + "Login/";
        var body = this.buildBody(user);
        var options = {
            responseType: "text",
        };
        return this.httpClient.post(url, body, options);
    };
    UserService.prototype.buildBody = function (user) {
        var body = new FormData();
        body.append("appid", Constants.APPLICATION_ID);
        body.append("ctl00$Content$txtUserName", user.name);
        body.append("ctl00$Content$txtPassword", user.password);
        body.append("ctl00$Content$BtnLogin", Constants.BUTTON_LOGIN);
        body.append("__EVENTVALIDATION", Constants.__EVENTVALIDATION);
        body.append("__VIEWSTATE", Constants.__VIEWSTATE);
        // body.append("__VIEWSTATEGENERATOR", Constants.__VIEWSTATEGENERATOR);
        return body;
    };
    UserService = __decorate([
        core_1.Injectable(),
        __metadata("design:paramtypes", [http_1.HttpClient])
    ], UserService);
    return UserService;
}());
exports.UserService = UserService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNlci5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsidXNlci5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsc0NBQTJDO0FBQzNDLDZDQUFrRDtBQUVsRCwyQ0FBNEM7QUFHNUM7SUFFSSxxQkFBcUIsVUFBc0I7UUFBdEIsZUFBVSxHQUFWLFVBQVUsQ0FBWTtJQUFJLENBQUM7SUFFaEQsMkJBQUssR0FBTCxVQUFPLElBQVU7UUFDYixJQUFNLEdBQUcsR0FBRyxTQUFTLENBQUMsVUFBVSxHQUFHLFFBQVEsQ0FBQztRQUM1QyxJQUFNLElBQUksR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2xDLElBQU0sT0FBTyxHQUFHO1lBQ1osWUFBWSxFQUFFLE1BQWdCO1NBQ2pDLENBQUM7UUFDRixNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQ3ZCLEdBQUcsRUFDSCxJQUFJLEVBQ0osT0FBTyxDQUNWLENBQUM7SUFDTixDQUFDO0lBRU8sK0JBQVMsR0FBakIsVUFBa0IsSUFBVTtRQUN4QixJQUFNLElBQUksR0FBRyxJQUFJLFFBQVEsRUFBRSxDQUFDO1FBQzVCLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFLFNBQVMsQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUMvQyxJQUFJLENBQUMsTUFBTSxDQUFDLDJCQUEyQixFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNwRCxJQUFJLENBQUMsTUFBTSxDQUFDLDJCQUEyQixFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUN4RCxJQUFJLENBQUMsTUFBTSxDQUFDLHdCQUF3QixFQUFFLFNBQVMsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUM5RCxJQUFJLENBQUMsTUFBTSxDQUFDLG1CQUFtQixFQUFFLFNBQVMsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1FBQzlELElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxFQUFFLFNBQVMsQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUNsRCx1RUFBdUU7UUFDdkUsTUFBTSxDQUFDLElBQUksQ0FBQztJQUNoQixDQUFDO0lBM0JRLFdBQVc7UUFEdkIsaUJBQVUsRUFBRTt5Q0FHd0IsaUJBQVU7T0FGbEMsV0FBVyxDQTRCdkI7SUFBRCxrQkFBQztDQUFBLEFBNUJELElBNEJDO0FBNUJZLGtDQUFXIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XHJcbmltcG9ydCB7IEh0dHBDbGllbnQgfSBmcm9tIFwiQGFuZ3VsYXIvY29tbW9uL2h0dHBcIjtcclxuaW1wb3J0IHsgVXNlciB9IGZyb20gXCIuL3VzZXJcIjtcclxuaW1wb3J0ICogYXMgQ29uc3RhbnRzIGZyb20gXCIuLi8uLi9jb25zdGFudHNcIlxyXG5cclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgVXNlclNlcnZpY2Uge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCBwcml2YXRlIGh0dHBDbGllbnQ6IEh0dHBDbGllbnQgKSB7fVxyXG5cclxuICAgIGxvZ2luKCB1c2VyOiBVc2VyICkge1xyXG4gICAgICAgIGNvbnN0IHVybCA9IENvbnN0YW50cy5TRVJWRVJfVVJMICsgXCJMb2dpbi9cIjtcclxuICAgICAgICBjb25zdCBib2R5ID0gdGhpcy5idWlsZEJvZHkodXNlcik7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiBcInRleHRcIiBhcyBcInRleHRcIixcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHBDbGllbnQucG9zdChcclxuICAgICAgICAgICAgdXJsLFxyXG4gICAgICAgICAgICBib2R5LFxyXG4gICAgICAgICAgICBvcHRpb25zXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGJ1aWxkQm9keSh1c2VyOiBVc2VyKSB7XHJcbiAgICAgICAgY29uc3QgYm9keSA9IG5ldyBGb3JtRGF0YSgpO1xyXG4gICAgICAgIGJvZHkuYXBwZW5kKFwiYXBwaWRcIiwgQ29uc3RhbnRzLkFQUExJQ0FUSU9OX0lEKTtcclxuICAgICAgICBib2R5LmFwcGVuZChcImN0bDAwJENvbnRlbnQkdHh0VXNlck5hbWVcIiwgdXNlci5uYW1lKTtcclxuICAgICAgICBib2R5LmFwcGVuZChcImN0bDAwJENvbnRlbnQkdHh0UGFzc3dvcmRcIiwgdXNlci5wYXNzd29yZCk7XHJcbiAgICAgICAgYm9keS5hcHBlbmQoXCJjdGwwMCRDb250ZW50JEJ0bkxvZ2luXCIsIENvbnN0YW50cy5CVVRUT05fTE9HSU4pO1xyXG4gICAgICAgIGJvZHkuYXBwZW5kKFwiX19FVkVOVFZBTElEQVRJT05cIiwgQ29uc3RhbnRzLl9fRVZFTlRWQUxJREFUSU9OKTtcclxuICAgICAgICBib2R5LmFwcGVuZChcIl9fVklFV1NUQVRFXCIsIENvbnN0YW50cy5fX1ZJRVdTVEFURSk7XHJcbiAgICAgICAgLy8gYm9keS5hcHBlbmQoXCJfX1ZJRVdTVEFURUdFTkVSQVRPUlwiLCBDb25zdGFudHMuX19WSUVXU1RBVEVHRU5FUkFUT1IpO1xyXG4gICAgICAgIHJldHVybiBib2R5O1xyXG4gICAgfVxyXG59Il19